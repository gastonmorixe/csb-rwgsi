{"version":3,"sources":["App.js","index.js"],"names":["API_KEY","ENDPOINTS","API","getTrending","a","axios","get","params","api_key","search","q","BigImage","props","picture","closeBigImage","imageURL","images","url","BigImageWrapper","type","onClick","BigImagePictureWrapper","BigImageDescriptionWrapper","title","Thumb","onClickHandler","React","ev","preventDefault","ThumbWrapper","Search","onChange","value","setValue","onInput","newValue","target","debounce","trailing","debouncedOnChange","SearchInput","placeholder","Gallery","bigPicture","setBigPicture","setImages","rawData","data","console","log","execute","isLoading","image","newSearchText","Date","now","GalleryWrapper","map","key","id","App","className","styled","div","p","input","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.9f94fc8d.chunk.js","sourcesContent":["import \"./styles.css\";\n\nimport * as React from \"react\";\nimport axios from \"axios\";\nimport styled from \"styled-components\";\nimport debounce from \"lodash/debounce\";\n\nconst API_KEY = \"5Muqe6HOngq40S9xI6ZQJ7jDfvZUoS5f\";\n\nconst ENDPOINTS = {\n  trending: \"https://api.giphy.com/v1/gifs/trending\",\n  search: \"https://api.giphy.com/v1/gifs/search\"\n};\n\nconst API = {\n  getTrending: async () => {\n    return axios.get(ENDPOINTS.trending, {\n      params: { api_key: API_KEY }\n    });\n  },\n  search: async (q) => {\n    return axios.get(ENDPOINTS.search, {\n      params: { api_key: API_KEY, q }\n    });\n  }\n};\n\nconst BigImage = (props) => {\n  const { picture, closeBigImage } = props;\n  const imageURL = picture.images[\"downsized_large\"].url;\n  // TODO CLOSE BUTTON\n  return (\n    <BigImageWrapper>\n      <button type=\"button\" onClick={closeBigImage}>\n        Close\n      </button>\n      <BigImagePictureWrapper {...{ imageURL }} />\n      <BigImageDescriptionWrapper>{picture.title}</BigImageDescriptionWrapper>\n    </BigImageWrapper>\n  );\n};\n\nconst Thumb = (props) => {\n  const { picture, onClick } = props;\n  const imageURL = picture.images[\"preview_gif\"].url;\n\n  const onClickHandler = React.useCallback(\n    (ev) => {\n      ev.preventDefault();\n      onClick(picture);\n    },\n    [onClick, picture]\n  );\n  return <ThumbWrapper onClick={onClickHandler} {...{ imageURL }} />;\n};\n\nconst Search = (props) => {\n  const { onChange } = props;\n  const [value, setValue] = React.useState(\"\");\n\n  const onInput = React.useCallback(\n    (ev) => {\n      const newValue = ev.target.value;\n      if (value !== newValue) {\n        setValue(newValue);\n      }\n    },\n    [value, setValue]\n  );\n\n  const [debouncedOnChange] = React.useState(() => {\n    return debounce(onChange, 500, { trailing: true });\n  }, [onChange]);\n\n  React.useEffect(() => {\n    if (!!value) {\n      debouncedOnChange?.(value);\n    }\n  }, [value, debouncedOnChange]);\n\n  return (\n    <SearchInput\n      {...{ onInput }}\n      value={value || \"\"}\n      placeholder=\"Search GIF\"\n    />\n  );\n};\n\nconst Gallery = () => {\n  const [bigPicture, setBigPicture] = React.useState();\n  const [images, setImages] = React.useState();\n\n  // on mount\n  React.useEffect(() => {\n    const execute = async () => {\n      let rawData;\n      try {\n        rawData = await API.getTrending();\n      } catch (error) {\n        // todo\n        throw error;\n      }\n      const images = rawData.data?.data;\n      setImages(images);\n      console.log(images);\n    };\n    execute();\n  }, []);\n\n  const isLoading = !images;\n\n  const onChange = (newSearchText) => {\n    const execute = async () => {\n      let rawData;\n      try {\n        console.log(`Searching: ${newSearchText}`, Date.now());\n        rawData = await API.search(newSearchText);\n      } catch (error) {\n        //  TODO\n        throw error;\n      }\n\n      const images = rawData.data?.data;\n      setImages(images);\n      console.log(images);\n    };\n    execute();\n  };\n\n  const onClick = React.useCallback(\n    (image) => {\n      setBigPicture(image);\n    },\n    [setBigPicture]\n  );\n\n  const closeBigImage = React.useCallback(() => {\n    setBigPicture(null);\n  }, [setBigPicture]);\n\n  return (\n    <>\n      <Search {...{ onChange }} />\n      <GalleryWrapper>\n        {isLoading && <div>Loading</div>}\n        {!isLoading &&\n          images?.map((picture) => {\n            return <Thumb {...{ onClick }} {...{ picture }} key={picture.id} />;\n          })}\n      </GalleryWrapper>\n      {bigPicture && <BigImage {...{ closeBigImage }} picture={bigPicture} />}\n    </>\n  );\n};\n\nexport default function App() {\n  return (\n    <div className=\"App\">\n      <Gallery />\n    </div>\n  );\n}\n\nconst ThumbWrapper = styled.div`\n  width: 200px;\n  height: 200px;\n  flex-shrink: 0;\n  flex-grow: 1;\n  display: flex;\n  background: url(${(p) => p.imageURL}) no-repeat 50% 50%;\n  background-size: cover;\n  padding: 10px;\n  cursor: pointer;\n\n  transition: transform 0.4s ease-in-out;\n  &:hover {\n    transform: scale(1.2);\n  }\n\n  &:nth-child(even) {\n    background-color: #eee;\n  }\n\n  @media only screen and (max-width: 380px) {\n    width: 100%;\n    height: 200px;\n  }\n`;\n\nconst GalleryWrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  /* border: 10px solid green; */\n  /* background: yellow; */\n`;\n\nconst SearchInput = styled.input`\n  /* border: 2px solid red; */\n  border: 0;\n  padding: 2rem 1.5rem;\n  width: 100%;\n`;\n\nconst BigImageWrapper = styled.div`\n  position: fixed;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n\n  background: white;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst BigImagePictureWrapper = styled.div`\n  display: flex;\n  flex: 1;\n  margin: 2rem;\n  background: #eee url(${(p) => p.imageURL}) no-repeat 50% 50%;\n  background-size: contain;\n`;\n\nconst BigImageDescriptionWrapper = styled.div`\n  padding: 2rem;\n  padding-top: 0;\n`;\n","import { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}